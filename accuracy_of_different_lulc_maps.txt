// AUTOMATICALLY GENERATED: imported vars from saved link.
var CONVERT_TO_IMPORT = (
[{"type":"table","name":"table","record":{"id":"users/Aybikeaydin2000/ua_bd_18"}},{"type":"imageCollection","name":"imageCollection2","record":{"id":"COPERNICUS/CORINE/V20/100m"}},{"type":"imageCollection","name":"imageCollection3","record":{"id":"ESA/WorldCover/v100"}},{"type":"geometry","name":"geometry","record":{"geometries":[{"type":"Polygon","coordinates":[[[18.83144785601014,47.65435078161937],[18.83144785601014,47.402130550326625],[19.22695566851014,47.402130550326625],[19.22695566851014,47.65435078161937]]],"geodesic":false,"evenOdd":true}],"displayProperties":[{"type":"rectangle"}],"properties":{},"color":"#d63000","mode":"Geometry","shown":false,"locked":false}},{"type":"imageCollection","name":"imageCollection4","record":{"id":"COPERNICUS/S2_HARMONIZED"}},{"type":"imageVisParam","name":"imageVisParam","record":{"params":{"opacity":1,"bands":["CORINE_ESA"],"gamma":1}}},{"type":"geometry","name":"water","record":{"geometries":[{"type":"Point","coordinates":[19.06221321606866,47.4606399397538]},{"type":"Point","coordinates":[19.041253545323258,47.407238388897]},{"type":"Point","coordinates":[19.044858434239273,47.4122628259637]},{"type":"Point","coordinates":[19.045327875917284,47.41726419238804]},{"type":"Point","coordinates":[19.04476112194545,47.42464890161222]},{"type":"Point","coordinates":[19.050648785750305,47.436612374542335]},{"type":"Point","coordinates":[19.051909235313587,47.44399571363611]},{"type":"Point","coordinates":[19.05800169305225,47.45558240283767]},{"type":"Point","coordinates":[19.066720758209442,47.473701232437]},{"type":"Point","coordinates":[19.058917998539776,47.48225714508738]},{"type":"Point","coordinates":[19.044720599429066,47.49619900472053]},{"type":"Point","coordinates":[19.045899969833485,47.53160521867502]},{"type":"Point","coordinates":[19.052895170944325,47.52673707035651]},{"type":"Point","coordinates":[19.06173573185741,47.549972613089764]},{"type":"Point","coordinates":[19.072869319881885,47.5871256405763]},{"type":"Point","coordinates":[19.11591820666471,47.64905666671497]},{"type":"Point","coordinates":[19.08544831225553,47.637722413489094]},{"type":"Point","coordinates":[19.103610986634735,47.61862089073747]},{"type":"Point","coordinates":[19.069178054933463,47.576006139655135]},{"type":"Point","coordinates":[19.09527266692983,47.609684181900185]}],"displayProperties":[],"properties":{},"color":"#2b97d6","mode":"Geometry","shown":true,"locked":false}},{"type":"geometry","name":"forest","record":{"geometries":[{"type":"Point","coordinates":[18.862612798147374,47.52354035142259]},{"type":"Point","coordinates":[18.8454895757963,47.5225984869821]},{"type":"Point","coordinates":[19.197387372318925,47.46195755537767]},{"type":"Point","coordinates":[19.21275106555623,47.4687464370102]},{"type":"Point","coordinates":[18.851099975182606,47.4362049116412]},{"type":"Point","coordinates":[18.84489368897509,47.647403420969155]},{"type":"Point","coordinates":[18.871587033091302,47.636184480728645]},{"type":"Point","coordinates":[18.84369714463688,47.610037065880746]},{"type":"Point","coordinates":[18.853825165877115,47.59892585688819]},{"type":"Point","coordinates":[18.870939259513325,47.56081901183176]},{"type":"Point","coordinates":[18.978928603819867,47.54263306342413]},{"type":"Point","coordinates":[19.213711722808057,47.646895368842394]},{"type":"Point","coordinates":[19.220795207908097,47.63413846739639]},{"type":"Point","coordinates":[18.919226049470463,47.42501641229629]},{"type":"Point","coordinates":[18.987032293366948,47.43221649311876]},{"type":"Point","coordinates":[19.19725905854612,47.41990224873993]},{"type":"Point","coordinates":[18.950933461485914,47.50715313041359]},{"type":"Point","coordinates":[19.160010299923137,47.53864812987321]},{"type":"Point","coordinates":[19.049072987333112,47.52892259055817]},{"type":"Point","coordinates":[18.94622158866883,47.561771071703944]}],"displayProperties":[],"properties":{},"color":"#98ff00","mode":"Geometry","shown":true,"locked":false}},{"type":"geometry","name":"agricultural","record":{"geometries":[{"type":"Point","coordinates":[19.213383474104518,47.596327757428]},{"type":"Point","coordinates":[19.174213554187528,47.547473746891875]},{"type":"Point","coordinates":[18.992171625544376,47.44954299957892]},{"type":"Point","coordinates":[18.912353041954546,47.480910374657235]},{"type":"Point","coordinates":[18.907417777367144,47.50193386841187]},{"type":"Point","coordinates":[18.96522474605611,47.57306127364099]},{"type":"Point","coordinates":[19.070761442123985,47.616389627613295]},{"type":"Point","coordinates":[19.023727191882195,47.624878068327206]},{"type":"Point","coordinates":[19.14879586120476,47.406754610042135]},{"type":"Point","coordinates":[19.16557576080193,47.40736454396985]},{"type":"Point","coordinates":[19.20828594004538,47.54644100807124]},{"type":"Point","coordinates":[19.20000327860739,47.55747647534055]},{"type":"Point","coordinates":[19.136445653790496,47.57521234938713]},{"type":"Point","coordinates":[18.995786821935386,47.5977403270976]},{"type":"Point","coordinates":[18.941842234227867,47.603817199638634]},{"type":"Point","coordinates":[18.90291715714644,47.42053971055066]},{"type":"Point","coordinates":[19.16178902088022,47.6150463092381]},{"type":"Point","coordinates":[19.113762159011337,47.62201927824167]},{"type":"Point","coordinates":[19.10692277833801,47.648490098638256]},{"type":"Point","coordinates":[19.045425090044553,47.650629475347614]}],"displayProperties":[],"properties":{},"color":"#f1ff18","mode":"Geometry","shown":true,"locked":false}},{"type":"geometry","name":"urban","record":{"geometries":[{"type":"Point","coordinates":[19.037402889892583,47.5288032078656]},{"type":"Point","coordinates":[19.1955027951064,47.502683318692945]},{"type":"Point","coordinates":[18.88910987634203,47.406711016474254]},{"type":"Point","coordinates":[18.836345460601063,47.41506069576484]},{"type":"Point","coordinates":[18.984766746117064,47.45471804573524]},{"type":"Point","coordinates":[18.903016499873363,47.45495492127962]},{"type":"Point","coordinates":[18.846378441806536,47.4748818817587]},{"type":"Point","coordinates":[19.067777651327184,47.4465970848401]},{"type":"Point","coordinates":[19.067290795692376,47.491411637487126]},{"type":"Point","coordinates":[19.044901108813587,47.51422702012115]},{"type":"Point","coordinates":[19.174389883857472,47.62957136268402]},{"type":"Point","coordinates":[18.876218627234994,47.62329322525239]},{"type":"Point","coordinates":[18.91031486823231,47.61747897033389]},{"type":"Point","coordinates":[19.207729727599997,47.414371304776154]},{"type":"Point","coordinates":[19.104870413190177,47.45672962980923]},{"type":"Point","coordinates":[19.011546605367293,47.49878481449672]},{"type":"Point","coordinates":[18.95126546850779,47.564148985220356]},{"type":"Point","coordinates":[18.881208942633027,47.58124742958384]},{"type":"Point","coordinates":[19.142872396730517,47.491605447062284]},{"type":"Point","coordinates":[19.1550302053116,47.447089505507556]}],"displayProperties":[],"properties":{},"color":"#ff2020","mode":"Geometry","shown":true,"locked":false}},{"type":"geometry","name":"wetland","record":{"geometries":[{"type":"Point","coordinates":[19.12905241959992,47.593004733124026]},{"type":"Point","coordinates":[19.124160070356755,47.60258358814204]},{"type":"Point","coordinates":[19.127207059797673,47.60799443192683]},{"type":"Point","coordinates":[19.1255548190445,47.61142293894179]},{"type":"Point","coordinates":[18.892130056915942,47.45613042936556]},{"type":"Point","coordinates":[19.076751773118588,47.6299183342436]},{"type":"Point","coordinates":[19.077009265184017,47.62419158987541]},{"type":"Point","coordinates":[19.062589709519955,47.617943516779604]},{"type":"Point","coordinates":[18.9510956451889,47.612128666902045]},{"type":"Point","coordinates":[18.908266131639095,47.60700759203159]},{"type":"Point","coordinates":[18.956643043243815,47.591201141851755]},{"type":"Point","coordinates":[19.20974495788628,47.55060657262563]},{"type":"Point","coordinates":[18.911379871074384,47.64533904232917]},{"type":"Point","coordinates":[19.081073950254343,47.51485855147986]},{"type":"Point","coordinates":[19.07914275976362,47.51633676463835]},{"type":"Point","coordinates":[18.91614676989594,47.61218834328296]},{"type":"Point","coordinates":[18.91988040484467,47.611985824652564]},{"type":"Point","coordinates":[18.923292174711612,47.610640502413524]},{"type":"Point","coordinates":[18.922197833433536,47.606922604006705]},{"type":"Point","coordinates":[18.92060996569672,47.60906368283514]}],"displayProperties":[],"properties":{},"color":"#00ffff","mode":"Geometry","shown":true,"locked":false}}])

// AUTOMATICALLY GENERATED: location from saved link.
Map.setCenter(18.706402881636734, 47.569874764300906, 11)

var img = ee.Image('COPERNICUS/S2_HARMONIZED/20180808T094031_20180808T094645_T34TCT')
var clipped = img.clip(geometry)
print(clipped)
Map.addLayer(clipped, {min:0, max:0.3, bands:["B4", "B3", "B2"]}, 'Sentinel');


var img2 = ee.Image("COPERNICUS/CORINE/V20/100m/2018")
print(img2)
var clipped2 = img2.clip(geometry)
Map.addLayer(clipped2, {} , 'Corine');


//print(imageCollection2)
var img3 = ee.Image("ESA/WorldCover/v100/2020")
print(img3)
var clipped3 = img3.clip(geometry)
Map.addLayer(clipped3, {} , 'ESA');




var img4 = table.map(function(f){return f.set("code_2018",ee.Number.parse(f.get("code_2018")))}).reduceToImage(["code_2018"], ee.Reducer.first()).rename("code_2018")
var clipped4 = img4.clip(geometry)
print(clipped4)
//https://developers.google.com/earth-engine/guides/image_visualization
var sld_intervals =
'<RasterSymbolizer>' +
  '<ColorMap type="intervals" extended="false">' +
    '<ColorMapEntry quantity="11100" color="#800000" label="11100 Continuous urban fabric (IMD =>80%)" value="11100" render="true"/>' +
    '<ColorMapEntry quantity="11210" color="#bf0000" label="11210 Discontinuous Dense Urban Fabric (IMD =>50-80%)" value="11210" render="true"/>' +
    '<ColorMapEntry quantity="11220" color="#ff4040" label="11220 Discontinuous Medium Density Urban Fabric (IMD =>30-50%)" value="11220" render="true"/>' +
    '<ColorMapEntry quantity="11230" color="#ff8080" label="11230 Discontinuous Low Density Urban Fabric (IMD =>10-30%)" value="11230" render="true"/>' +
    '<ColorMapEntry quantity="11240" color="#ffbfbf" label="11240 Discontinuous very low density urban fabric (other)" value="11240" render="true"/>' +
    '<ColorMapEntry quantity="11300" color="#cc6666" label="11300 Isolated Structures" value="11300" render="true"/>' +
    '<ColorMapEntry quantity="12100" color="#cc4df2" label="12100 Industrial, commercial, public, military and private units" value="12100" render="true"/>' +
    '<ColorMapEntry quantity="12210" color="#959595" label="12210 Fast transit roads and associated land" value="12210" render="true"/>' +
    '<ColorMapEntry quantity="12220" color="#b3b3b3" label="12220 Other roads and associated land" value="12220" render="true"/>' +
    '<ColorMapEntry quantity="12230" color="#595959" label="12230 Railways and associated land" value="12230" render="true"/>' +
    '<ColorMapEntry quantity="12300" color="#e6cccc" label="12300 Port areas" value="12300" render="true"/>' +
    '<ColorMapEntry quantity="12400" color="#e6cce6" label="12400 Airports" value="12400" render="true"/>' +
    '<ColorMapEntry quantity="13100" color="#734d37" label="13100 Mineral extraction and dump sites" value="13100" render="true"/>' +
    '<ColorMapEntry quantity="13300" color="#b9a56e" label="13300 Construction sites" value="13300" render="true"/>' +
    '<ColorMapEntry quantity="13400" color="#874545" label="13400 Land without current use" value="13400" render="true"/>' +
    '<ColorMapEntry quantity="14100" color="#8cdc00" label="14100 Green urban areas" value="14100" render="true"/>' +
    '<ColorMapEntry quantity="14200" color="#afd2a5" label="14200 Sports and leisure facilities" value="14200" render="true"/>' +
    '<ColorMapEntry quantity="21000" color="#ffffa8" label="21000 Arable land (annual crops)" value="21000" render="true"/>' +
    '<ColorMapEntry quantity="22000" color="#f2a64d" label="22000 Permanent crops" value="22000" render="true"/>' +
    '<ColorMapEntry quantity="23000" color="#e6e64d" label="23000 Pastures" value="23000" render="true"/>' +
    '<ColorMapEntry quantity="24000" color="#ffe64d" label="24000 Complex and mixed cultivation patterns" value="24000" render="true"/>' +
    '<ColorMapEntry quantity="25000" color="#f2cc80" label="25000 Orchads" value="25000" render="true"/>' +
    '<ColorMapEntry quantity="31000" color="#008c00" label="31000 Forests" value="31000" render="true"/>' +
    '<ColorMapEntry quantity="32000" color="#ccf24d" label="32000 Herbaceous vegetation associations" value="32000" render="true"/>' +
    '<ColorMapEntry quantity="33000" color="#ccffcc" label="33000 Open spaces with little or no vegetations" value="33000" render="true"/>' +
    '<ColorMapEntry quantity="40000" color="#a6a6ff" label="40000 Wetlands" value="40000" render="true"/>' +
    '<ColorMapEntry quantity="50000" color="#80f2e6" label="50000 Water" value="50000" render="true"/>' +
  '</ColorMap>' +
'</RasterSymbolizer>';

Map.addLayer(clipped4.sldStyle(sld_intervals) , {} , 'Urban Atlas');



// ["#e6004d","#ffffa8","	#80ff00","#a6a6ff","#00ccf2"] renkleri böyle yapalım mı ??????

var reduced = clipped2.divide(100).int().rename("CORINE")
Map.addLayer(reduced,{min:1, max:5, palette:["pink","yellow","green","grey","blue"]},'Corine Reduced for Accuracy');


var reduced2 = clipped3.remap([10,20,30,40,50,60,70,80,90,95,100],[3,3,3,2,1,3,5,5,4,4,3]).rename("ESA")
Map.addLayer(reduced2,{min:1, max:5, palette:["pink","yellow","green","grey","blue"]}, 'ESA Reduced for Accuracy');


var reduced3 = clipped4.divide(10000).int().rename("URBANATLAS")
Map.addLayer(reduced3, {min:1, max:5,palette:["pink","yellow","green","grey","blue"]},'Urban Atlas Reduced for Accuracy')


var img5 = reduced.addBands(reduced2)
print
var samples = img5.stratifiedSample(20, "CORINE", geometry,100)
print(samples)
var errorMatrix = samples.errorMatrix("CORINE", "ESA")
print(errorMatrix)


//Başlıkları düzenleyelimmm

print(errorMatrix.accuracy(),'Consistency Between ESA-Corine')
print(errorMatrix.kappa(),'Kappa of ESA according to CORINE')
print(errorMatrix.producersAccuracy(),'Producers Accuracy of ESA according to CORINE')
print(errorMatrix.consumersAccuracy(),'Consumers Accuracy of ESA according to CORINE')


var img6 = reduced.addBands(reduced3)
print(img6)
var samples2 = img6.stratifiedSample(20, "CORINE", geometry,100)
print(samples2)
var errorMatrix2 = samples2.errorMatrix("CORINE", "URBANATLAS")
print(errorMatrix2)




var img7 = reduced3.addBands(reduced2)
print
var samples3 = img7.stratifiedSample(20, "URBANATLAS", geometry,100)
print(samples3)
var errorMatrix3 = samples3.errorMatrix("URBANATLAS", "ESA")
print(errorMatrix3)

print(errorMatrix3.accuracy(),'Accuracy of ESA according to URBAN ATLAS')
print(errorMatrix3.kappa(),'Kappa of ESA according to URBAN ATLAS')
print(errorMatrix3.producersAccuracy(),'Producers Accuracy of ESA according to URBAN ATLAS')
print(errorMatrix3.consumersAccuracy(),'Consumers Accuracy of ESA according to URBAN ATLAS')





//clippedImage4 = clippedImage4.divide(10000).int().rename("URBANATLAS")
//Map.addLayer(clippedImage4, {min:1, max:5,palette:["pink","yellow","green","grey","blue"]},'URBAN ATLAS for Accuracy')

//clippedImage2 = clippedImage2.divide(100).int().rename("CORINE")
//Map.addLayer(clippedImage2,{min:1, max:5, palette:["pink","yellow","green","grey","blue"]},'CORINE for Accuracy');

//clippedImage3 = clippedImage3.remap([10,20,30,40,50,60,70,80,90,95,100],[3,3,3,2,1,3,5,5,4,4,3]).rename("ESA")
//Map.addLayer(clippedImage3,{min:1, max:5, palette:["pink","yellow","green","grey","blue"]}, 'ESA for Accuracy');

//var img4 = clippedImage2.addBands(clippedImage3)
//print
//var samples = img4.stratifiedSample(20, "CORINE", geometry,100)
//print(samples)
//var errorMatrix = samples.errorMatrix("CORINE", "ESA")
//print(errorMatrix)

//print(errorMatrix.accuracy(),'Accuracy of ESA according to CORINE')
//print(errorMatrix.kappa(),'Kappa of ESA according to CORINE')
//print(errorMatrix.producersAccuracy(),'Producers Accuracy of ESA according to CORINE')
//print(errorMatrix.consumersAccuracy(),'Consumers Accuracy of ESA according to CORINE')

//var img5 = clippedImage2.addBands(clippedImage4)
//print
//var samples2 = img5.stratifiedSample(20, "CORINE", geometry,100)
//print(samples2)
//var errorMatrix2 = samples2.errorMatrix("CORINE", "URBANATLAS")
//print(errorMatrix2)

//print(errorMatrix2.accuracy(),'Accuracy of URBAN ATLAS according to CORINE')
//print(errorMatrix2.kappa(),'Kappa of URBAN ATLAS according to CORINE')
//print(errorMatrix2.producersAccuracy(),'Producers Accuracy of URBAN ATLAS according to CORINE')
//print(errorMatrix2.consumersAccuracy(),'Consumers Accuracy of URBAN ATLAS according to CORINE')

//var img6 = clippedImage4.addBands(clippedImage3)
//print
//var samples3 = img6.stratifiedSample(20, "URBANATLAS", geometry,100)
//print(samples3)
//var errorMatrix3 = samples3.errorMatrix("URBANATLAS", "ESA")
//print(errorMatrix3)

//print(errorMatrix3.accuracy(),'Accuracy of ESA according to URBAN ATLAS')
//print(errorMatrix3.kappa(),'Kappa of ESA according to URBAN ATLAS')
//print(errorMatrix3.producersAccuracy(),'Producers Accuracy of ESA according to URBAN ATLAS')
//print(errorMatrix3.consumersAccuracy(),'Consumers Accuracy of ESA according to URBAN ATLAS')